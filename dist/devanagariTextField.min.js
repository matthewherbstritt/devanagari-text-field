/**
 * almond 0.1.2 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define([],t):e.devanagariTextField=t()})(this,function(){var e,t,n;return function(r){function c(e,t){var n=t&&t.split("/"),r=o.map,i=r&&r["*"]||{},s,u,a,f,l,c,h,p,d,v;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(p=0;v=e[p];p++)if(v===".")e.splice(p,1),p-=1;else if(v===".."){if(p===1&&(e[2]===".."||e[0]===".."))return!0;p>0&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((n||i)&&r){s=e.split("/");for(p=s.length;p>0;p-=1){u=s.slice(0,p).join("/");if(n)for(d=n.length;d>0;d-=1){a=r[n.slice(0,d).join("/")];if(a){a=a[u];if(a){f=a,l=p;break}}}if(f)break;!c&&i&&i[u]&&(c=i[u],h=p)}!f&&c&&(f=c,l=h),f&&(s.splice(0,l,f),e=s.join("/"))}return e}function h(e,t){return function(){return l.apply(r,a.call(arguments,0).concat([e,t]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(t){i[e]=t}}function v(e){if(s.hasOwnProperty(e)){var t=s[e];delete s[e],u[e]=!0,f.apply(r,t)}if(!i.hasOwnProperty(e))throw new Error("No "+e);return i[e]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return o&&o.config&&o.config[e]||{}}}var i={},s={},o={},u={},a=[].slice,f,l;f=function(e,t,n,o){var a=[],f,l,c,p,y,b;o=o||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(b=0;b<t.length;b++){y=m(t[b],o),c=y.f;if(c==="require")a[b]=h(e);else if(c==="exports")a[b]=i[e]={},f=!0;else if(c==="module")l=a[b]={id:e,uri:"",exports:i[e],config:g(e)};else if(i.hasOwnProperty(c)||s.hasOwnProperty(c))a[b]=v(c);else if(y.p)y.p.load(y.n,h(o,!0),d(c),{}),a[b]=i[c];else if(!u[c])throw new Error(e+" missing "+c)}p=n.apply(i[e],a);if(e)if(l&&l.exports!==r&&l.exports!==i[e])i[e]=l.exports;else if(p!==r||!f)i[e]=p}else e&&(i[e]=n)},e=t=l=function(e,t,n,i){return typeof e=="string"?v(m(e,t).f):(e.splice||(o=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},i?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},15),l)},l.config=function(e){return o=e,l},n=function(e,t,n){t.splice||(n=t,t=[]),s[e]=[e,t,n]},n.amd={jQuery:!0}}(),n("../tools/almond",function(){}),n("util",[],function(){return{isDependentSign:function(e){return["ऀ","ॕ","ः","ं","ँ","ॎ","॑","॒"].indexOf(e)>-1},isIndependentSign:function(e){return["ॐ","।","॥","॰","ॱ","ॽ","ऽ"].indexOf(e)>-1},isIndependentVowel:function(e){return["ॷ","ॶ","ॵ","ॴ","ॳ","ॲ","ॡ","ॠ","औ","ओ","ऒ","ऑ","ऐ","ए","ऎ","ऍ","ऌ","ऋ","ऊ","उ","ई","इ","आ","अ","ऄ"].indexOf(e)>-1},isDependentVowel:function(e){return["ॗ","ॖ","ॏ","ऻ","ऺ","ॣ","ॄ","ौ","ो","ॊ","ॉ","ै","े","ॆ","ॅ","ॢ","ृ","ू","ु","ी","ि","ा"].indexOf(e)>-1},isConsonant:function(e){return["क","ख","ग","घ","ङ","च","छ","ज","झ","ञ","ट","ठ","ड","ढ","ण","त","थ","द","ध","न","प","फ","ब","भ","म","य","र","ल","ळ","व","श","ष","स","ह","ॹ","ॺ","ॻ","ॼ","ॾ","ॿ"].indexOf(e)>-1},isNumeral:function(e){return["०","१","२","३","४","५","६","७","८","९"].indexOf(e)>-1},isViramaConsonant:function(e){return["क्","ख्","ग्","घ्","ङ्","च्","छ्","ज्","झ्","ञ्","ट्","ठ्","ड्","ढ्","ण्","त्","थ्","द्","ध्","न्","प्","फ्","ब्","भ्","म्","य्","र्","ल्","ळ्","व्","श्","ष्","स्","ह्","ॹ्","ॺ्","ॻ्","ॼ्","ॾ्","ॿ्"].indexOf(e)>-1},isNuktaConsonant:function(e){return["क़","ख़","ग़","ज़","ड़","ढ़","फ़","य़","ऱ","ऴ","ऩ"].indexOf(e)>-1},isAnusvara:function(e){return"ं"===e},isVirama:function(e){return"्"===e},isNukta:function(e){return"़"===e},vowelExtendsSchwa:function(e){return["आ","ऐ","औ","ा","ै","ौ"].indexOf(e)>-1},vowelExtendsMatra:function(e,t){return e==="ि"&&t==="ी"||e==="ु"&&t==="ू"||e==="े"&&t==="ै"||e==="ो"&&t==="ौ"||e==="ॖ"&&t==="ॗ"||e==="ऺ"&&t==="ऻ"||e==="ॢ"&&t==="ॣ"||e==="ृ"&&t==="-R"},getMatra:function(e){return e.hasOwnProperty("matra")?e.matra:!1},isDevanagari:function(e){var t=["०","१","२","३","४","५","६","७","८","९","अ","ॲ","ॅ","आ","ा","इ","ि","ई","ी","ए","े","ऐ","ै","ओ","ो","औ","ौ","उ","ु","ऊ","ू","ऋ","ृ","ॠ","ॄ","ऌ","ॢ","ॡ","ॣ","ऍ","ॅ","ऑ","ॉ","ऎ","ॆ","ऒ","ॊ","ॳ","ऺ","ॴ","ऻ","ॵ","ॏ","ॶ","ॖ","ॷ","ॗ","क","ख","ग","घ","ङ","च","छ","ज","झ","ञ","ट","ठ","ड","ढ","ण","त","थ","द","ध","न","प","फ","ब","भ","म","य","र","ल","ळ","व","श","ष","स","ह","ॹ","ॺ","ॻ","ॼ","ॾ","ॿ","क़","ख़","ग़","ज़","ड़","ढ़","फ़","य़","ऱ","ऴ","ऩ","्","़","ॎ","ॕ","ऀ","ँ","ं","ः","॑","॒","ॐ","।","॥","॰","ॱ","ॽ","ऽ"];return t.indexOf(e)>-1},suppressesVirama:function(e){return["अ"].indexOf(e)>-1},addEvent:function(e,t,n){function r(e){var t=n.apply(this,arguments);return t===!1&&(e.stopPropagation(),e.preventDefault()),t}function i(){var t=n.call(e,window.event);return t===!1&&(window.event.returnValue=!1,window.event.cancelBubble=!0),t}e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,i)},getSettings:function(e,t){var n,r={};if(t&&typeof t=="object"){for(n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}return e},keyCodeAltersInputString:function(e,t,n){var r=[0,8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,45,46,112,113,114,115,116,117,118,119,120,121,122,123,144,255];return t===!0?!0:n===!0&&e===65||n===!0&&e===67||n===!0&&e===86||n===!0&&e===88||n===!0&&e===90?!1:r.indexOf(e)===-1},isArrowKey:function(e){return[37,38,39,40].indexOf(e)>-1},isSpaceKey:function(e){return 32===e},isShiftKey:function(e){return 16===e},isBackspaceKey:function(e){return 8===e},isValidTextElement:function(e){return e.nodeName==="INPUT"&&e.type==="text"||e.nodeName==="TEXTAREA"&&e.type==="textarea"},isBlankOrEmptyString:function(e){return[" ","","\n","\r","	"].indexOf(e)>-1},isWhiteSpaceChar:function(e){return[" ","\n","\r","	"].indexOf(e)>-1}}}),n("keyMap",[],function(){function t(){var t=["do","if","in"];for(var n in e)if(t.indexOf(n)>-1)throw new Error("Invalid key used. '"+n+"' is a reserved word.")}function n(e){var t,n,r;for(t in e){r=e[t];if(t.length===1)for(n in e)if(n.length===2&&n[0]===t){e[t].isOverridable=!0;break}}}function r(e){var t;for(t in e)e[t].removeLast=t.length===2&&e.hasOwnProperty(t[0])}function i(t){var n={};if(!t)return!1;for(var r in t){var i=t[r],s=!1;for(var o in e){var u=e[o];if(u.char===i){n[o]=u,s=!0;break}}s||console.warn("Character: "+i+" is not supported.")}return n&&Object.keys(n).length>0?n:!1}function s(e){var t=o(),s=i(e);if(s)for(var u in s){var a=s[u],f=a.char;delete t[u];for(var l in e)e[l]===f&&(t[l]={},t[l].char=a.char,a.hasOwnProperty("matra")&&(t[l].matra=a.matra),n(t),r(t))}return t}function o(){var t,i,s={};for(t in e)s[t]={},i=e[t],s[t].char=i.char,i.hasOwnProperty("matra")&&(s[t].matra=i.matra);return n(s),r(s),s}var e={a:{code:"अ",category:"VOWEL",type:"LETTER",name:"A","char":"अ"},"^a":{code:"ॲ",category:"VOWEL",type:"LETTER",name:"CANDRA A","char":"ॲ",matra:"ॅ",matraCode:"ॅ"},aa:{code:"आ",category:"VOWEL",type:"LETTER",name:"AA","char":"आ",matra:"ा",matraCode:"ा"},i:{code:"इ",category:"VOWEL",type:"LETTER",name:"I","char":"इ",matra:"ि",matraCode:"ि"},ii:{code:"ई",category:"VOWEL",type:"LETTER",name:"II","char":"ई",matra:"ी",matraCode:"ी"},e:{code:"ए",category:"VOWEL",type:"LETTER",name:"E","char":"ए",matra:"े",matraCode:"े"},ai:{code:"ऐ",category:"VOWEL",type:"LETTER",name:"AI","char":"ऐ",matra:"ै",matraCode:"ै"},o:{code:"ओ",category:"VOWEL",type:"LETTER",name:"O","char":"ओ",matra:"ो",matraCode:"ो"},au:{code:"औ",category:"VOWEL",type:"LETTER",name:"AU","char":"औ",matra:"ौ",matraCode:"ौ"},u:{code:"उ",category:"VOWEL",type:"LETTER",name:"U","char":"उ",matra:"ु",matraCode:"ु"},uu:{code:"ऊ",category:"VOWEL",type:"LETTER",name:"UU","char":"ऊ",matra:"ू",matraCode:"ू"},"-r":{code:"ऋ",category:"VOWEL",type:"LETTER",name:"VOCALIC R","char":"ऋ",matra:"ृ",matraCode:"ृ"},"-R":{code:"ॠ",category:"VOWEL",type:"LETTER",name:"VOCALIC RR","char":"ॠ",matra:"ॄ",matraCode:"ॄ"},"-l":{code:"ऌ",category:"VOWEL",type:"LETTER",name:"VOCALIC L","char":"ऌ",matra:"ॢ",matraCode:"ॢ"},"-L":{code:"ॡ",category:"VOWEL",type:"LETTER",name:"VOCALIC LL","char":"ॡ",matra:"ॣ",matraCode:"ॣ"},"^e":{code:"ऍ",category:"VOWEL",type:"LETTER",name:"CANDRA E","char":"ऍ",matra:"ॅ",matraCode:"ॅ"},"^o":{code:"ऑ",category:"VOWEL",type:"LETTER",name:"CANDRA O","char":"ऑ",matra:"ॉ",matraCode:"ॉ"},"-e":{code:"ऎ",category:"VOWEL",type:"LETTER",name:"SHORT E","char":"ऎ",matra:"ॆ",matraCode:"ॆ"},"-o":{code:"ऒ",category:"VOWEL",type:"LETTER",name:"SHORT O","char":"ऒ",matra:"ॊ",matraCode:"ॊ"},oE:{code:"ॳ",category:"VOWEL",type:"LETTER",name:"OE","char":"ॳ",matra:"ऺ",matraCode:"ऺ"},OE:{code:"ॴ",category:"VOWEL",type:"LETTER",name:"OOE","char":"ॴ",matra:"ऻ",matraCode:"ऻ"},aW:{code:"ॵ",category:"VOWEL",type:"LETTER",name:"AW","char":"ॵ",matra:"ॏ",matraCode:"ॏ"},_u:{code:"ॶ",category:"VOWEL",type:"LETTER",name:"UE","char":"ॶ",matra:"ॖ",matraCode:"ॖ"},_U:{code:"ॷ",category:"VOWEL",type:"LETTER",name:"UUE","char":"ॷ",matra:"ॗ",matraCode:"ॗ"},k:{code:"क",category:"CONSONANT",type:"LETTER",name:"KA","char":"क"},kh:{code:"ख",category:"CONSONANT",type:"LETTER",name:"KHA","char":"ख"},g:{code:"ग",category:"CONSONANT",type:"LETTER",name:"GA","char":"ग"},gh:{code:"घ",category:"CONSONANT",type:"LETTER",name:"GHA","char":"घ"},Ng:{code:"ङ",category:"CONSONANT",type:"LETTER",name:"NGA","char":"ङ"},c:{code:"च",category:"CONSONANT",type:"LETTER",name:"C","char":"च"},ch:{code:"छ",category:"CONSONANT",type:"LETTER",name:"CHA","char":"छ"},j:{code:"ज",category:"CONSONANT",type:"LETTER",name:"JA","char":"ज"},jh:{code:"झ",category:"CONSONANT",type:"LETTER",name:"JHA","char":"झ"},Nj:{code:"ञ",category:"CONSONANT",type:"LETTER",name:"NYA","char":"ञ"},T:{code:"ट",category:"CONSONANT",type:"LETTER",name:"TTA","char":"ट"},Th:{code:"ठ",category:"CONSONANT",type:"LETTER",name:"TTHA","char":"ठ"},D:{code:"ड",category:"CONSONANT",type:"LETTER",name:"DDA","char":"ड"},Dh:{code:"ढ",category:"CONSONANT",type:"LETTER",name:"DDHA","char":"ढ"},Nd:{code:"ण",category:"CONSONANT",type:"LETTER",name:"NNA","char":"ण"},t:{code:"त",category:"CONSONANT",type:"LETTER",name:"TA","char":"त"},th:{code:"थ",category:"CONSONANT",type:"LETTER",name:"THA","char":"थ"},d:{code:"द",category:"CONSONANT",type:"LETTER",name:"DA","char":"द"},dh:{code:"ध",category:"CONSONANT",type:"LETTER",name:"DHA","char":"ध"},n:{code:"न",category:"CONSONANT",type:"LETTER",name:"NA","char":"न"},p:{code:"प",category:"CONSONANT",type:"LETTER",name:"PA","char":"प"},ph:{code:"फ",category:"CONSONANT",type:"LETTER",name:"PHA","char":"फ"},b:{code:"ब",category:"CONSONANT",type:"LETTER",name:"BA","char":"ब"},bh:{code:"भ",category:"CONSONANT",type:"LETTER",name:"BHA","char":"भ"},m:{code:"म",category:"CONSONANT",type:"LETTER",name:"MA","char":"म"},y:{code:"य",category:"CONSONANT",type:"LETTER",name:"YA","char":"य"},r:{code:"र",category:"CONSONANT",type:"LETTER",name:"RA","char":"र"},l:{code:"ल",category:"CONSONANT",type:"LETTER",name:"LA","char":"ल"},L:{code:"ळ",category:"CONSONANT",type:"LETTER",name:"LLA","char":"ळ"},v:{code:"व",category:"CONSONANT",type:"LETTER",name:"VA","char":"व"},sh:{code:"श",category:"CONSONANT",type:"LETTER",name:"SHA","char":"श"},S:{code:"ष",category:"CONSONANT",type:"LETTER",name:"SSA","char":"ष"},s:{code:"स",category:"CONSONANT",type:"LETTER",name:"SA","char":"स"},h:{code:"ह",category:"CONSONANT",type:"LETTER",name:"HA","char":"ह"},zh:{code:"ॹ",category:"CONSONANT",type:"LETTER",name:"ZHA","char":"ॹ"},YY:{code:"ॺ",category:"CONSONANT",type:"LETTER",name:"HEAVY YA","char":"ॺ"},"-G":{code:"ॻ",category:"CONSONANT",type:"LETTER",name:"GGA","char":"ॻ"},"-J":{code:"ॼ",category:"CONSONANT",type:"LETTER",name:"JJA","char":"ॼ"},"-D":{code:"ॾ",category:"CONSONANT",type:"LETTER",name:"DDDA","char":"ॾ"},"-B":{code:"ॿ",category:"CONSONANT",type:"LETTER",name:"BBA","char":"ॿ"},Q:{code:"क़",category:"CONSONANT",type:"LETTER",name:"QA","char":"क़"},X:{code:"ख़",category:"CONSONANT",type:"LETTER",name:"KHHA","char":"ख़"},G:{code:"ग़",category:"CONSONANT",type:"LETTER",name:"GHHA","char":"ग़"},Z:{code:"ज़",category:"CONSONANT",type:"LETTER",name:"ZA","char":"ज़"},R:{code:"ड़",category:"CONSONANT",type:"LETTER",name:"DDDHA","char":"ड़"},Rh:{code:"ढ़",category:"CONSONANT",type:"LETTER",name:"RHA","char":"ढ़"},F:{code:"फ़",category:"CONSONANT",type:"LETTER",name:"FA","char":"फ़"},Y:{code:"य़",category:"CONSONANT",type:"LETTER",name:"YYA","char":"य़"},".R":{code:"ऱ",category:"CONSONANT",type:"LETTER",name:"RRA","char":"ऱ"},".L":{code:"ऴ",category:"CONSONANT",type:"LETTER",name:"LLLA","char":"ऴ"},".N":{code:"ऩ",category:"CONSONANT",type:"LETTER",name:"NNNA","char":"ऩ"},0:{code:"०",category:"NUMBER",type:"DIGIT",name:"ZERO","char":"०"},1:{code:"१",category:"NUMBER",type:"DIGIT",name:"ONE","char":"१"},2:{code:"२",category:"NUMBER",type:"DIGIT",name:"TWO","char":"२"},3:{code:"३",category:"NUMBER",type:"DIGIT",name:"THREE","char":"३"},4:{code:"४",category:"NUMBER",type:"DIGIT",name:"FOUR","char":"४"},5:{code:"५",category:"NUMBER",type:"DIGIT",name:"FIVE","char":"५"},6:{code:"६",category:"NUMBER",type:"DIGIT",name:"SIX","char":"६"},7:{code:"७",category:"NUMBER",type:"DIGIT",name:"SEVEN","char":"७"},8:{code:"८",category:"NUMBER",type:"DIGIT",name:"EIGHT","char":"८"},9:{code:"९",category:"NUMBER",type:"DIGIT",name:"NINE","char":"९"},"#":{code:"्",category:"SIGN: DEP",type:"VOWEL SIGN",name:"VIRAMA","char":"्"},"##":{code:"़",category:"SIGN: DEP",type:"SIGN",name:"NUKTA","char":"़"},"^E":{code:"ॎ",category:"VOWEL",type:"VOWEL SIGN",name:"PRISHTHAMATRA E","char":"ॎ"},"-^":{code:"ॕ",category:"VOWEL",type:"VOWEL SIGN",name:"CANDRA LONG E","char":"ॕ"},"-M":{code:"ऀ",category:"SIGN: DEP",type:"SIGN",name:"INVERTED CANDRABINDU","char":"ऀ"},MM:{code:"ँ",category:"SIGN: DEP",type:"SIGN",name:"CANDRABINDU","char":"ँ"},M:{code:"ं",category:"SIGN: DEP",type:"SIGN",name:"ANUSVARA","char":"ं"},H:{code:"ः",category:"SIGN: DEP",type:"SIGN",name:"VISARGA","char":"ः"},"-|":{code:"॑",category:"SIGN: DEP",type:"STRESS SIGN",name:"UDATTA","char":"॑"},"-_":{code:"॒",category:"SIGN: DEP",type:"STRESS SIGN",name:"ANUDATTA","char":"॒"},O:{code:"ॐ",category:"SIGN: IND",type:"UNCLASSIFIED",name:"OM","char":"ॐ"},"\\":{code:"।",category:"SIGN: IND",type:"PUNCTUATION",name:"DANDA","char":"।"},"|":{code:"॥",category:"SIGN: IND",type:"PUNCTUATION",name:"DOUBLE DANDA","char":"॥"},"-0":{code:"॰",category:"SIGN: IND",type:"ABBREVIATION SIGN",name:"ABBREVIATION SIGN","char":"॰"},"^.":{code:"ॱ",category:"SIGN: IND",type:"ABBREVIATION SIGN",name:"HIGH SPACING DOT","char":"ॱ"},"-:":{code:"ॽ",category:"SIGN: IND",type:"LETTER",name:"GLOTTAL STOP","char":"ॽ"},"-s":{code:"ऽ",category:"SIGN: IND",type:"SIGN",name:"AVAGRAHA","char":"ऽ"}};return{build:function(e){return e.customKeyMap?s(e.customKeyMap):o()}}}),n("devanagari",["util"],function(e){function r(e){return e.length>0?e.slice(-1):""}function i(n,i,s){var o=i.hasOwnProperty("matra")?i.matra:!1,u=i.char,a=r(n),f=s.autoAddVirama;if(e.isConsonant(u)||e.isNuktaConsonant(u))return f?u+t:u;if(e.isIndependentVowel(u)){if(e.isVirama(a))return o!==!1?o:u;if(e.isConsonant(a)||e.isNukta(a)||e.isNuktaConsonant(a))return o&&e.vowelExtendsSchwa(u)?o:u;if(e.isDependentVowel(a))return o&&e.vowelExtendsMatra(a,o)?o:u}else if(e.isDependentSign(u))return u;return u}function s(t,n,r){var s=i(t,n,r);return e.isVirama(s)||e.isNukta(s)?t:t+s}function o(r,s,o){var u=r.slice(-2,-1),a=i(r,s,o);return e.isDependentVowel(a)?r.slice(0,-1)+a:e.isIndependentVowel(a)?e.suppressesVirama(a)?r.slice(0,-1):r+a:e.isConsonant(a)||e.isViramaConsonant(a)||e.isNuktaConsonant(a)?r+a:e.isNukta(a)?e.isConsonant(u)?r.slice(0,-1)+n+t:r:e.isVirama(a)?r:e.isDependentSign(a)?e.isConsonant(u)||e.isNukta(u)?r.slice(0,-1)+a:r:r+a}function u(t,n,r){var s=i(t,n,r);return e.isDependentSign(s)?t:t+s}function a(t,n,a){var f=r(t),l=n?i(t,n,a):!1;return!e.isDevanagari(f)&&!e.isBlankOrEmptyString(f)?t+l:l?e.isIndependentVowel(f)||e.isDependentVowel(f)?s(t,n,a):e.isVirama(f)?o(t,n,a):e.isDependentSign(f)?u(t,n,a):e.isConsonant(f)||e.isNuktaConsonant(f)||e.isNukta(f)||e.isIndependentSign(f)||e.isBlankOrEmptyString(f)||e.isNumeral(f)?t+l:t:t}function f(e){var n=r(e);return n===t?e.slice(0,-1):e}var t="्",n="़";return{appendChar:a,removeVirama:f}}),n("events",["util"],function(e){function n(e,t){return e>t}function r(e){return[0,8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,45,46,112,113,114,115,116,117,118,119,120,121,122,123,144,255].indexOf(e)>-1}function i(e,t){return e&&t===17||e&&t===65||e&&t===67||e&&t===86||e&&t===88||e&&t===89||e&&t===90}var t={};return t.toggleScript=function(){var e=this.getCaretIndex(),t=this.settings.scriptMode==="Devanagari";t?(this.settings.scriptMode="Roman",this.clearKeyAndStringCache(),this.resetKeyEventCount()):(this.settings.scriptMode="Devanagari",this.devanagariCharObj=null,this.inputStringKeyRemoved=null,this.inputString=this.element.value,this.clearKeyAndStringCache(),this.resetKeyEventCount())},t.resetKeyEventCount=function(){this.keydownCount=0,this.keyupCount=0},t.incrementKeyEventCount=function(e){var t=this.cachedCtrlKey,n=this.ctrlKey,s=this.cachedKeyCode,o=this.keyCode;if(e==="keydown"){if(i(n,o))return}else if(e==="keyup")if(t&&o===17||t&&o===65||t&&o===67||t&&o===86||t&&o===88||t&&o===89||t&&o===90||s===65&&o===17||s===17&&o===65||s===67&&o===17||s===17&&o===67||s===86&&o===17||s===17&&o===86||s===88&&o===17||s===17&&o===88||s===89&&o===17||s===17&&o===89||s===90&&o===17||s===17&&o===90)return;r(o)||(e==="keyup"?this.keyupCount=this.keyupCount+=1:e==="keydown"&&(this.keydownCount=this.keydownCount+=1))},t.onKeyHeldDown=function(){var e=this.getCaretIndex(),t=e-this.keydownCount;this.element.value=this.inputString,this.resetKeyEventCount(),this.setCaretIndex(t)},t.onKeydown=function(e){var t=e.keyCode?e.keyCode:e.which,n=e.type,r=e.shiftKey,i=e.ctrlKey,s=this.settings;this.cacheCtrlKey(i),this.cacheShiftKey(r),this.cacheKeyCode(t),this.incrementKeyEventCount(n)},t.onKeyup=function(t){var r=t.keyCode?t.keyCode:t.which,i=t.type,s=t.shiftKey,o=t.ctrlKey,u=this.settings;this.cacheCtrlKey(o),this.cacheShiftKey(s),this.cacheKeyCode(r);if(s&&o&&r===54){this.toggleScript();return}if(u.scriptMode==="Roman")return;this.incrementKeyEventCount(i);if(n(this.keydownCount,this.keyupCount)){this.onKeyHeldDown();return}this.resetKeyEventCount(),this.cacheInputString();if(this.inputString.length>this.cachedInputString.length){this.cacheCaretIndex(),this.cacheKey();if(!!e.isDevanagari(this.key))return!1;this.cacheInputStringKeyRemoved();if(!e.isWhiteSpaceChar(this.key))this.setDevObj(),this.appendDevanagariChar(),this.cacheInputString();else{if(u.autoRemoveVirama){this.autoRemoveVirama(),this.cacheInputString();return}this.clearKeyAndStringCache()}}else r!==16&&r!==17&&this.clearKeyAndStringCache()},t.onClick=function(){this.clearKeyAndStringCache()},t.onChange=function(){this.inputString=this.element.value},t.onBlur=function(){this.clearKeyAndStringCache()},t}),n("textField",["util","keyMap","devanagari","events"],function(e,t,n,r){function i(n,r){var i=this,s=e.getSettings({autoAddVirama:!0,autoRemoveVirama:!0,toggleScriptButton:!1,toggleScriptKey:"Ctrl+Shift+T",scriptMode:"Devanagari",customKeyMap:!1},r);if(!e.isValidTextElement(n))throw new Error("Element must be a text element.");this.element=n,this.settings=s,this.keyMap=t.build(s),this.devanagariCharObj=null,this.keydownCount=0,this.keyupCount=0,this.caretIndex=this.getCaretIndex(),this.cachedCaretIndex=null,this.key=null,this.cachedKey=null,this.inputString=n.value,this.cachedInputString=null,this.inputStringKeyRemoved=null,this.cachedInputStringKeyRemoved=null,e.addEvent(this.element,"keyup",function(e){i.onKeyup(e||window.event)}),e.addEvent(this.element,"keydown",function(e){i.onKeydown(e||winow.event)}),e.addEvent(this.element,"click",function(){i.onClick()}),e.addEvent(this.element,"blur",function(){i.onBlur()}),e.addEvent(this.element,"change",function(){i.onChange()})}i.prototype.autoRemoveVirama=function(){var e,t,r,i,s=this.caretIndex===this.element.value.length;s?(t=this.inputString.slice(-1),r=this.inputString.slice(0,-1),e=n.removeVirama(r)+t,this.outputString(e)):(t=this.inputString.slice(this.caretIndex-1,this.caretIndex),i=this.inputString.slice(0,this.caretIndex-1),inputStrEndSub=this.inputString.slice(this.caretIndex),outputStartSub=n.removeVirama(i),e=outputStartSub+t+inputStrEndSub,this.outputString(e),this.setCaretIndex(outputStartSub.length+1))},i.prototype.appendDevanagariChar=function(){var e,t,r,i=this.caretIndex,s=this.cachedCaretIndex,o=this.cachedInputStringKeyRemoved!==null?this.cachedInputStringKeyRemoved:!1,u=o?o.slice(0,s-1):!1,a=this.caretIndex===this.element.value.length,f=this.inputStringKeyRemoved!==null?this.inputStringKeyRemoved:!1,l=f?f.slice(0,i-1):!1,c=f?f.slice(i-1):!1,h=this.devanagariCharObj,p=this.settings;if(h!=null){r=h.removeLast;if(a){r?e=n.appendChar(o,h,p):e=n.appendChar(f,h,p),this.outputString(e);return}r?(t=n.appendChar(u,h,p),e=t+c):(t=n.appendChar(l,h,p),e=t+c),this.outputString(e),this.setCaretIndex(t.length);return}e=this.inputStringKeyRemoved,this.outputString(e),this.setCaretIndex(i-1)},i.prototype.getCaretIndex=function(){var e,t,n,r,i,s=0,o=0,u=this.element;return typeof u.selectionStart=="number"&&typeof u.selectionEnd=="number"?(s=u.selectionStart,o=u.selectionEnd):(t=document.selection.createRange(),t&&t.parentElement()===u&&(r=u.value.length,e=u.value.replace(/\r\n/g,"\n"),n=u.createTextRange(),n.moveToBookmark(t.getBookmark()),i=u.createTextRange(),i.collapse(!1),n.compareEndPoints("StartToEnd",i)>-1?s=o=r:(s=-n.moveStart("character",-r),s+=e.slice(0,s).split("\n").length-1,n.compareEndPoints("EndToEnd",i)>-1?o=r:(o=-n.moveEnd("character",-r),o+=e.slice(0,o).split("\n").length-1)))),o},i.prototype.setCaretIndex=function(e){var t;this.element!=null&&(this.element.createTextRange?(t=this.element.createTextRange(),t.move("character",e),t.select()):this.element.selectionStart?(this.element.focus(),this.element.setSelectionRange(e,e)):this.element.focus())},i.prototype.setDevObj=function(){var e=this.cachedKey!=null?this.cachedKey+this.key:!1,t=this.key!==null?this.key:!1,n=this.keyMap;e&&n.hasOwnProperty(e)?(this.devanagariCharObj=n[e],this.cachedKey=null,this.key=null):t&&n.hasOwnProperty(t)?this.devanagariCharObj=n[t]:this.devanagariCharObj=null},i.prototype.cacheShiftKey=function(e){this.cachedShiftKey=this.shiftKey,this.shiftKey=e},i.prototype.cacheCtrlKey=function(e){this.cachedCtrlKey=this.ctrlKey,this.ctrlKey=e},i.prototype.cacheKeyCode=function(e){this.cachedKeyCode=this.keyCode,this.keyCode=e},i.prototype.cacheInputString=function(){this.cachedInputString=this.inputString!=null?this.inputString:"",this.inputString=this.element.value},i.prototype.cacheInputStringKeyRemoved=function(){var e=this.element.value,t=this.inputStringKeyRemoved,n=this.caretIndex;this.cachedInputStringKeyRemoved=t!=null?t:"",this.inputStringKeyRemoved=n>0?e.slice(0,n-1)+e.slice(n):""},i.prototype.outputString=function(e){this.element.value=e},i.prototype.clearKeyAndStringCache=function(){this.key=null,this.cachedKey=null,this.cachedInputString=null,this.cachedInputStringKeyRemoved=null},i.prototype.cacheCaretIndex=function(){this.cachedCaretIndex=this.caretIndex,this.caretIndex=this.getCaretIndex()},i.prototype.cacheKey=function(){var e=this.caretIndex;this.cachedKey=this.key,this.key=e>0?this.element.value[e-1]:""},i.prototype.incrementKeyEventCount=r.incrementKeyEventCount,i.prototype.resetKeyEventCount=r.resetKeyEventCount,i.prototype.toggleScript=r.toggleScript,i.prototype.onKeyHeldDown=r.onKeyHeldDown,i.prototype.onKeydown=r.onKeydown,i.prototype.onKeyup=r.onKeyup,i.prototype.onClick=r.onClick,i.prototype.onChange=r.onChange,i.prototype.onBlur=r.onBlur;var s=function(e,t){var n=document.getElementById(e);return new i(n,t)};return s}),n("main",["require","textField"],function(e){var t=e("textField");return t}),t("main")}); 